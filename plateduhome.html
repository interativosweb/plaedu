<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Plataforma do Professor</title>

  <style>
    :root{
      --bg: #0b0c0f;
      --card: rgba(255,255,255,.06);
      --card2: rgba(255,255,255,.10);
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.62);
      --border: rgba(255,255,255,.14);
      --shadow: 0 20px 60px rgba(0,0,0,.45);
      --radius: 18px;
      --radius2: 24px;
      --accent: rgba(255,255,255,.88);
      --danger: rgba(255,90,90,.95);
      --ok: rgba(120,255,190,.95);
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color: var(--text);
      background:
        radial-gradient(1200px 700px at 20% 0%, rgba(255,255,255,.10), transparent 60%),
        radial-gradient(900px 600px at 90% 10%, rgba(255,255,255,.08), transparent 55%),
        radial-gradient(800px 600px at 50% 100%, rgba(255,255,255,.06), transparent 55%),
        linear-gradient(180deg, #07080a, #0b0c0f);
      overflow-x:hidden;
    }

    a{ color:inherit; text-decoration:none; }

    .wrap{
      min-height:100%;
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 32px 16px;
    }

    .shell{
      width: min(1100px, 100%);
    }

    /* Top bar */
    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 14px;
      padding: 14px 16px;
      border-radius: var(--radius2);
      background: rgba(255,255,255,.05);
      border: 1px solid var(--border);
      backdrop-filter: blur(14px);
      box-shadow: var(--shadow);
      margin-bottom: 18px;
    }

    .brand{
      display:flex;
      align-items:center;
      gap: 12px;
      min-width: 240px;
    }
    .logo{
      width: 38px; height: 38px;
      border-radius: 14px;
      background: linear-gradient(135deg, rgba(255,255,255,.95), rgba(255,255,255,.35));
      box-shadow: 0 10px 26px rgba(0,0,0,.25);
    }
    .brand h1{
      font-size: 14px;
      margin:0;
      letter-spacing:.3px;
      font-weight: 650;
    }
    .brand p{
      margin:2px 0 0;
      font-size: 12px;
      color: var(--muted);
    }

    .actions{
      display:flex;
      align-items:center;
      gap: 10px;
      flex-wrap: wrap;
      justify-content:flex-end;
    }

    .pill{
      display:flex;
      align-items:center;
      gap: 8px;
      padding: 10px 12px;
      border-radius: 999px;
      background: rgba(255,255,255,.06);
      border: 1px solid var(--border);
      color: var(--muted);
      font-size: 12px;
      user-select:none;
      backdrop-filter: blur(14px);
    }

    .btn{
      border: 1px solid var(--border);
      background: rgba(255,255,255,.06);
      color: var(--text);
      padding: 10px 12px;
      border-radius: 12px;
      cursor:pointer;
      transition: transform .12s ease, background .12s ease, border-color .12s ease;
      backdrop-filter: blur(14px);
      font-weight: 600;
      font-size: 12px;
    }
    .btn:hover{ transform: translateY(-1px); background: rgba(255,255,255,.09); border-color: rgba(255,255,255,.22); }
    .btn:active{ transform: translateY(0px); }
    .btn.primary{
      background: rgba(255,255,255,.88);
      color: #0b0c0f;
      border-color: rgba(255,255,255,.35);
    }
    .btn.danger{
      background: rgba(255,90,90,.14);
      border-color: rgba(255,90,90,.35);
      color: rgba(255,210,210,.95);
    }

    /* Cards grid */
    .grid{
      display:grid;
      grid-template-columns: repeat(12, 1fr);
      gap: 14px;
    }

    .panel{
      grid-column: span 12;
      padding: 18px;
      border-radius: var(--radius2);
      background: rgba(255,255,255,.05);
      border: 1px solid var(--border);
      backdrop-filter: blur(14px);
      box-shadow: var(--shadow);
    }

    .panel h2{
      margin: 0 0 6px;
      font-size: 15px;
      letter-spacing: .2px;
      font-weight: 700;
    }
    .panel .sub{
      margin: 0 0 16px;
      font-size: 12px;
      color: var(--muted);
      line-height: 1.4;
    }

    .cards{
      display:grid;
      grid-template-columns: repeat(12, 1fr);
      gap: 12px;
    }

    .card{
      grid-column: span 12;
      padding: 16px;
      border-radius: var(--radius2);
      background: linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.04));
      border: 1px solid var(--border);
      backdrop-filter: blur(14px);
      transition: transform .14s ease, border-color .14s ease, background .14s ease;
      position: relative;
      overflow:hidden;
    }
    .card:hover{
      transform: translateY(-2px);
      border-color: rgba(255,255,255,.24);
      background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.05));
    }

    .cardHeader{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 10px;
    }

    .title{
      display:flex;
      flex-direction:column;
      gap: 6px;
      min-width: 0;
    }
    .title strong{
      font-size: 14px;
      font-weight: 750;
      letter-spacing:.2px;
      white-space: nowrap;
      overflow:hidden;
      text-overflow: ellipsis;
    }
    .title span{
      font-size: 12px;
      color: var(--muted);
      white-space: nowrap;
      overflow:hidden;
      text-overflow: ellipsis;
    }

    .tags{
      display:flex;
      gap: 6px;
      flex-wrap: wrap;
      justify-content:flex-end;
      flex-shrink:0;
    }
    .tag{
      font-size: 11px;
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.12);
      color: rgba(255,255,255,.72);
    }

    .cardFooter{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      margin-top: 14px;
    }

    .small{
      font-size: 11px;
      color: var(--muted);
    }

    .iconBtn{
      border: 1px solid var(--border);
      background: rgba(255,255,255,.06);
      color: var(--text);
      padding: 8px 10px;
      border-radius: 12px;
      cursor:pointer;
      transition: transform .12s ease, background .12s ease, border-color .12s ease;
      font-weight: 700;
      font-size: 12px;
    }
    .iconBtn:hover{ transform: translateY(-1px); background: rgba(255,255,255,.09); border-color: rgba(255,255,255,.22); }
    .iconBtn:active{ transform: translateY(0px); }

    /* Responsive */
    @media (min-width: 680px){
      .card{ grid-column: span 6; }
      .panel{ padding: 22px; }
    }
    @media (min-width: 980px){
      .card{ grid-column: span 4; }
    }

    /* Login */
    .auth{
      display:grid;
      grid-template-columns: repeat(12, 1fr);
      gap: 14px;
      align-items: stretch;
    }
    .authLeft{
      grid-column: span 12;
      padding: 22px;
      border-radius: var(--radius2);
      background: rgba(255,255,255,.05);
      border: 1px solid var(--border);
      backdrop-filter: blur(14px);
      box-shadow: var(--shadow);
    }
    .authRight{
      grid-column: span 12;
      padding: 22px;
      border-radius: var(--radius2);
      background: rgba(255,255,255,.05);
      border: 1px solid var(--border);
      backdrop-filter: blur(14px);
      box-shadow: var(--shadow);
    }
    @media (min-width: 980px){
      .authLeft{ grid-column: span 7; }
      .authRight{ grid-column: span 5; }
    }

    .authLeft h2{
      margin: 0 0 10px;
      font-size: 20px;
      font-weight: 800;
      letter-spacing:.2px;
    }
    .authLeft p{ margin: 0 0 14px; color: var(--muted); font-size: 13px; line-height:1.5; }
    .authHero{
      margin-top: 18px;
      border-radius: var(--radius2);
      padding: 16px;
      background: linear-gradient(135deg, rgba(255,255,255,.10), rgba(255,255,255,.04));
      border: 1px solid rgba(255,255,255,.12);
    }
    .authHero ul{ margin: 0; padding-left: 16px; color: rgba(255,255,255,.72); font-size: 12px; line-height:1.6; }

    .field{
      display:flex;
      flex-direction:column;
      gap: 8px;
      margin-bottom: 12px;
    }
    label{
      font-size: 12px;
      color: rgba(255,255,255,.74);
      letter-spacing:.2px;
      font-weight: 650;
    }
    input{
      border-radius: 14px;
      border: 1px solid var(--border);
      background: rgba(255,255,255,.06);
      color: var(--text);
      padding: 12px 12px;
      outline:none;
      font-size: 14px;
      transition: border-color .12s ease, background .12s ease;
    }
    input:focus{
      border-color: rgba(255,255,255,.28);
      background: rgba(255,255,255,.08);
    }

    .row{
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items:center;
      justify-content: space-between;
    }

    .msg{
      margin-top: 10px;
      font-size: 12px;
      color: rgba(255,255,255,.72);
    }
    .msg.ok{ color: var(--ok); }
    .msg.bad{ color: rgba(255,150,150,.95); }

    /* Modal */
    .backdrop{
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,.55);
      display:none;
      align-items:center;
      justify-content:center;
      padding: 18px;
      z-index: 50;
    }
    .modal{
      width: min(560px, 100%);
      border-radius: var(--radius2);
      background: rgba(20,20,24,.92);
      border: 1px solid rgba(255,255,255,.16);
      backdrop-filter: blur(18px);
      box-shadow: var(--shadow);
      padding: 18px;
    }
    .modal h3{ margin: 0 0 4px; font-size: 14px; font-weight: 800; }
    .modal p{ margin: 0 0 14px; font-size: 12px; color: var(--muted); line-height:1.5; }
    .modalActions{
      display:flex;
      gap: 10px;
      justify-content:flex-end;
      margin-top: 12px;
      flex-wrap: wrap;
    }

    .hidden{ display:none !important; }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="shell">

      <!-- LOGIN VIEW -->
      <section id="loginView" class="auth">
        <div class="authLeft">
          <div class="brand" style="margin-bottom:10px;">
            <div class="logo"></div>
            <div>
              <h1>Plataforma do Professor</h1>
              <p>Atividades • Links • Acesso rápido</p>
            </div>
          </div>

          <h2>Escolha a atividade do dia com um clique.</h2>
          <p>
            Faça login e acesse uma biblioteca de atividades (seus outros sites).
            Você pode adicionar, editar e organizar os links diretamente aqui.
          </p>

          <div class="authHero">
            <ul>
              <li>Design minimalista (dark glass) com cards elegantes</li>
              <li>Login único (configurável) e sessão local</li>
              <li>Links e atividades salvos no navegador (sem servidor)</li>
            </ul>
          </div>
        </div>

        <div class="authRight">
          <h2 style="margin:0 0 12px; font-size:16px; font-weight:800;">Entrar</h2>

          <div class="field">
            <label for="user">Usuário</label>
            <input id="user" autocomplete="username" placeholder="Digite seu usuário" />
          </div>

          <div class="field">
            <label for="pass">Senha</label>
            <input id="pass" type="password" autocomplete="current-password" placeholder="Digite sua senha" />
          </div>

          <div class="row">
            <button class="btn primary" id="loginBtn">Entrar</button>
            <button class="btn" id="demoBtn" title="Preenche com um exemplo">Usar exemplo</button>
          </div>

          <div id="loginMsg" class="msg"></div>

          <div class="msg" style="margin-top:14px;">
            <span style="color:rgba(255,255,255,.55)">Dica:</span>
            Você pode mudar o usuário/senha no topo do arquivo (veja “CONFIG”).
          </div>
        </div>
      </section>

      <!-- APP VIEW -->
      <section id="appView" class="hidden">
        <header class="topbar">
          <div class="brand">
            <div class="logo"></div>
            <div>
              <h1>Plataforma do Professor</h1>
              <p id="subtitle">Bem-vindo</p>
            </div>
          </div>

          <div class="actions">
            <div class="pill" id="countPill">0 atividades</div>
            <button class="btn" id="addBtn">+ Nova atividade</button>
            <button class="btn danger" id="logoutBtn">Sair</button>
          </div>
        </header>

        <main class="grid">
          <section class="panel">
            <h2>Atividades</h2>
            <p class="sub">
              Clique em uma atividade para abrir o link em uma nova aba.
              Você pode editar/remover e adicionar quantas quiser.
            </p>

            <div id="cards" class="cards"></div>

            <div id="emptyState" class="sub hidden" style="margin-top:8px;">
              Nenhuma atividade cadastrada. Clique em <b>“Nova atividade”</b> para adicionar.
            </div>
          </section>
        </main>
      </section>

    </div>
  </div>

  <!-- MODAL -->
  <div id="backdrop" class="backdrop" role="dialog" aria-modal="true">
    <div class="modal">
      <h3 id="modalTitle">Nova atividade</h3>
      <p id="modalHint">Cadastre um nome e o link do seu outro site.</p>

      <div class="field">
        <label for="actName">Nome da atividade</label>
        <input id="actName" placeholder="Ex.: Jogo de Frações" />
      </div>

      <div class="field">
        <label for="actUrl">Link (URL)</label>
        <input id="actUrl" placeholder="https://seusite.com/atividade" />
      </div>

      <div class="field">
        <label for="actTag">Tag (opcional)</label>
        <input id="actTag" placeholder="Ex.: Matemática • 6º ano" />
      </div>

      <div class="modalActions">
        <button class="btn" id="cancelBtn">Cancelar</button>
        <button class="btn primary" id="saveBtn">Salvar</button>
      </div>

      <div id="modalMsg" class="msg"></div>
    </div>
  </div>

  <script>
    /***********************
     * CONFIG (mude aqui)
     ***********************/
    const AUTH = {
      username: "professor",
      password: "1234"
    };

    const STORAGE_KEYS = {
      session: "platform_session_v1",
      activities: "platform_activities_v1"
    };

    /***********************
     * Helpers
     ***********************/
    const $ = (id) => document.getElementById(id);

    function nowGreeting() {
      const h = new Date().getHours();
      if (h < 12) return "Bom dia";
      if (h < 18) return "Boa tarde";
      return "Boa noite";
    }

    function isValidUrl(url) {
      try {
        const u = new URL(url);
        return ["http:", "https:"].includes(u.protocol);
      } catch {
        return false;
      }
    }

    function loadActivities() {
      const raw = localStorage.getItem(STORAGE_KEYS.activities);
      if (!raw) return seedActivities();
      try {
        const arr = JSON.parse(raw);
        if (Array.isArray(arr)) return arr;
        return seedActivities();
      } catch {
        return seedActivities();
      }
    }

    function saveActivities(arr) {
      localStorage.setItem(STORAGE_KEYS.activities, JSON.stringify(arr));
    }

    function seedActivities() {
      const starter = [
        { id: crypto.randomUUID(), name: "Atividade 1 (exemplo)", url: "https://example.com", tag: "Exemplo" },
        { id: crypto.randomUUID(), name: "Atividade 2 (exemplo)", url: "https://example.com", tag: "Interativa" }
      ];
      saveActivities(starter);
      return starter;
    }

    function setSession(isOn, username="") {
      localStorage.setItem(STORAGE_KEYS.session, JSON.stringify({ isOn, username }));
    }

    function getSession() {
      const raw = localStorage.getItem(STORAGE_KEYS.session);
      if (!raw) return { isOn: false, username: "" };
      try { return JSON.parse(raw) ?? { isOn: false, username: "" }; }
      catch { return { isOn: false, username: "" }; }
    }

    /***********************
     * State
     ***********************/
    let activities = [];
    let editingId = null;

    /***********************
     * Views
     ***********************/
    function showLogin() {
      $("loginView").classList.remove("hidden");
      $("appView").classList.add("hidden");
      $("loginMsg").textContent = "";
      $("user").value = "";
      $("pass").value = "";
      editingId = null;
    }

    function showApp(username) {
      $("loginView").classList.add("hidden");
      $("appView").classList.remove("hidden");
      $("subtitle").textContent = `${nowGreeting()}, ${username}.`;
      activities = loadActivities();
      render();
    }

    /***********************
     * Render
     ***********************/
    function render() {
      const cards = $("cards");
      cards.innerHTML = "";

      $("countPill").textContent = `${activities.length} atividade${activities.length === 1 ? "" : "s"}`;
      $("emptyState").classList.toggle("hidden", activities.length !== 0);

      for (const a of activities) {
        const card = document.createElement("div");
        card.className = "card";

        const host = (() => {
          try { return new URL(a.url).host; } catch { return a.url; }
        })();

        const tagHtml = a.tag
          ? `<span class="tag">${escapeHtml(a.tag)}</span>`
          : `<span class="tag">Sem tag</span>`;

        card.innerHTML = `
          <div class="cardHeader">
            <div class="title">
              <strong title="${escapeHtml(a.name)}">${escapeHtml(a.name)}</strong>
              <span title="${escapeHtml(a.url)}">${escapeHtml(host)}</span>
            </div>
            <div class="tags">
              ${tagHtml}
            </div>
          </div>

          <div class="cardFooter">
            <span class="small">Abre em nova aba</span>
            <div style="display:flex; gap:8px; align-items:center;">
              <button class="iconBtn" data-action="open" data-id="${a.id}">Abrir</button>
              <button class="iconBtn" data-action="edit" data-id="${a.id}">Editar</button>
              <button class="iconBtn" data-action="del" data-id="${a.id}" style="border-color: rgba(255,90,90,.35); background: rgba(255,90,90,.10);">Excluir</button>
            </div>
          </div>
        `;

        cards.appendChild(card);
      }
    }

    function escapeHtml(str) {
      return String(str).replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }

    /***********************
     * Modal
     ***********************/
    function openModal(mode, activity=null) {
      $("backdrop").style.display = "flex";
      $("modalMsg").textContent = "";
      $("modalMsg").className = "msg";

      if (mode === "create") {
        editingId = null;
        $("modalTitle").textContent = "Nova atividade";
        $("modalHint").textContent = "Cadastre um nome e o link do seu outro site.";
        $("actName").value = "";
        $("actUrl").value = "";
        $("actTag").value = "";
      } else {
        editingId = activity.id;
        $("modalTitle").textContent = "Editar atividade";
        $("modalHint").textContent = "Atualize o nome, link e/ou tag.";
        $("actName").value = activity.name ?? "";
        $("actUrl").value = activity.url ?? "";
        $("actTag").value = activity.tag ?? "";
      }

      setTimeout(() => $("actName").focus(), 50);
    }

    function closeModal() {
      $("backdrop").style.display = "none";
      editingId = null;
    }

    function showModalMsg(text, ok=false) {
      $("modalMsg").textContent = text;
      $("modalMsg").className = "msg " + (ok ? "ok" : "bad");
    }

    /***********************
     * Actions
     ***********************/
    function doLogin() {
      const u = $("user").value.trim();
      const p = $("pass").value;

      if (!u || !p) {
        $("loginMsg").textContent = "Preencha usuário e senha.";
        $("loginMsg").className = "msg bad";
        return;
      }

      if (u === AUTH.username && p === AUTH.password) {
        setSession(true, u);
        showApp(u);
      } else {
        $("loginMsg").textContent = "Usuário ou senha inválidos.";
        $("loginMsg").className = "msg bad";
      }
    }

    function doLogout() {
      setSession(false, "");
      showLogin();
    }

    function handleCardAction(e) {
      const btn = e.target.closest("button[data-action]");
      if (!btn) return;
      const action = btn.dataset.action;
      const id = btn.dataset.id;

      const item = activities.find(x => x.id === id);
      if (!item) return;

      if (action === "open") {
        window.open(item.url, "_blank", "noopener,noreferrer");
        return;
      }

      if (action === "edit") {
        openModal("edit", item);
        return;
      }

      if (action === "del") {
        const ok = confirm(`Excluir "${item.name}"?`);
        if (!ok) return;
        activities = activities.filter(x => x.id !== id);
        saveActivities(activities);
        render();
      }
    }

    function saveFromModal() {
      const name = $("actName").value.trim();
      const url = $("actUrl").value.trim();
      const tag = $("actTag").value.trim();

      if (!name) return showModalMsg("Digite o nome da atividade.");
      if (!url) return showModalMsg("Digite o link (URL).");
      if (!isValidUrl(url)) return showModalMsg("URL inválida. Use algo como https://...");

      if (editingId) {
        activities = activities.map(a => a.id === editingId ? { ...a, name, url, tag } : a);
        saveActivities(activities);
        render();
        showModalMsg("Alterações salvas.", true);
        setTimeout(closeModal, 450);
      } else {
        activities.unshift({ id: crypto.randomUUID(), name, url, tag });
        saveActivities(activities);
        render();
        showModalMsg("Atividade adicionada.", true);
        setTimeout(closeModal, 450);
      }
    }

    /***********************
     * Init
     ***********************/
    function init() {
      // Buttons
      $("loginBtn").addEventListener("click", doLogin);
      $("demoBtn").addEventListener("click", () => {
        $("user").value = AUTH.username;
        $("pass").value = AUTH.password;
        $("loginMsg").textContent = "Exemplo preenchido — clique em Entrar.";
        $("loginMsg").className = "msg ok";
      });

      $("logoutBtn").addEventListener("click", doLogout);
      $("addBtn").addEventListener("click", () => openModal("create"));

      $("cancelBtn").addEventListener("click", closeModal);
      $("saveBtn").addEventListener("click", saveFromModal);

      // Close modal by clicking backdrop
      $("backdrop").addEventListener("click", (e) => {
        if (e.target === $("backdrop")) closeModal();
      });

      // Enter key behavior
      document.addEventListener("keydown", (e) => {
        if (e.key === "Enter") {
          const loginVisible = !$("loginView").classList.contains("hidden");
          const modalOpen = $("backdrop").style.display === "flex";
          if (loginVisible) doLogin();
          if (modalOpen) saveFromModal();
        }
        if (e.key === "Escape") {
          const modalOpen = $("backdrop").style.display === "flex";
          if (modalOpen) closeModal();
        }
      });

      // Card actions
      $("cards").addEventListener("click", handleCardAction);

      // Restore session
      const s = getSession();
      if (s.isOn && s.username) showApp(s.username);
      else showLogin();
    }

    init();
  </script>
</body>
</html>
