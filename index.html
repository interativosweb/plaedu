<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Plataforma do Professor</title>

  <style>
    :root{
      /* Azul principal aproximado da imagem (#024A7F) */
      --blue-900:#021625;
      --blue-850:#031E33;
      --blue-800:#022A44;
      --blue-700:#024A7F;   /* principal */
      --blue-650:#055E9B;   /* hover */
      --blue-600:#0A6FB8;   /* brilho */

      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.62);
      --border: rgba(255,255,255,.14);

      --glass: rgba(255,255,255,.06);
      --glass2: rgba(255,255,255,.10);

      --shadow: 0 22px 70px rgba(0,0,0,.55);
      --radius: 18px;
      --radius2: 22px;

      --danger: rgba(255,90,90,.95);
      --ok: rgba(120,255,190,.95);
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color: var(--text);
      background:
        radial-gradient(900px 600px at 15% 0%, rgba(10,111,184,.18), transparent 60%),
        radial-gradient(900px 600px at 85% 15%, rgba(2,74,127,.18), transparent 55%),
        radial-gradient(900px 650px at 45% 105%, rgba(5,94,155,.16), transparent 55%),
        linear-gradient(180deg, var(--blue-900), #070A0F);
      overflow-x:hidden;
    }

    a{ color:inherit; text-decoration:none; }

    .wrap{
      min-height:100%;
      display:flex;
      justify-content:center;
      padding: 24px 16px 40px;
    }

    .shell{ width:min(1150px, 100%); }

    /* ======= Login Top Bar (esquerda t√≠tulo, direita form) ======= */
    .loginBar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 16px;
      padding: 14px 16px;
      border-radius: var(--radius2);
      background: rgba(2,74,127,.22);
      border: 1px solid rgba(255,255,255,.16);
      backdrop-filter: blur(14px);
      box-shadow: var(--shadow);
    }

    .brand{
      display:flex;
      align-items:center;
      gap: 12px;
      min-width: 260px;
    }
    .logo{
      width: 38px; height: 38px;
      border-radius: 14px;
      background: linear-gradient(135deg, rgba(255,255,255,.92), rgba(255,255,255,.26));
      box-shadow: 0 14px 34px rgba(0,0,0,.38);
      position: relative;
      overflow:hidden;
    }
    .logo::after{
      content:"";
      position:absolute;
      inset:-40%;
      background: radial-gradient(circle at 30% 30%, rgba(10,111,184,.55), transparent 55%);
      transform: rotate(18deg);
    }
    .brand h1{
      font-size: 14px;
      margin:0;
      letter-spacing:.3px;
      font-weight: 800;
    }
    .brand p{
      margin:2px 0 0;
      font-size: 12px;
      color: rgba(255,255,255,.68);
    }

    .loginForm{
      display:flex;
      align-items:center;
      gap: 10px;
      flex-wrap: wrap;
      justify-content:flex-end;
      width: 100%;
    }

    .miniField{
      display:flex;
      flex-direction:column;
      gap: 6px;
      min-width: 180px;
    }
    .miniField label{
      font-size: 11px;
      color: rgba(255,255,255,.78);
      letter-spacing:.2px;
      font-weight: 700;
    }

    input{
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.08);
      color: var(--text);
      padding: 10px 12px;
      outline:none;
      font-size: 13px;
      transition: border-color .12s ease, background .12s ease;
      min-height: 40px;
    }
    input:focus{
      border-color: rgba(10,111,184,.65);
      background: rgba(255,255,255,.10);
    }

    .btn{
      border: 1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.08);
      color: var(--text);
      padding: 10px 14px;
      border-radius: 14px;
      cursor:pointer;
      transition: transform .12s ease, background .12s ease, border-color .12s ease, box-shadow .12s ease;
      backdrop-filter: blur(14px);
      font-weight: 800;
      font-size: 12px;
      min-height: 40px;
    }
    .btn:hover{
      transform: translateY(-1px);
      background: rgba(255,255,255,.11);
      border-color: rgba(255,255,255,.26);
    }
    .btn:active{ transform: translateY(0px); }
    .btn.primary{
      background: linear-gradient(180deg, rgba(10,111,184,.95), rgba(2,74,127,.92));
      border-color: rgba(10,111,184,.65);
      box-shadow: 0 14px 34px rgba(2,74,127,.35);
    }
    .btn.primary:hover{
      box-shadow: 0 18px 44px rgba(10,111,184,.32);
      border-color: rgba(10,111,184,.85);
    }
    .btn.danger{
      background: rgba(255,90,90,.14);
      border-color: rgba(255,90,90,.35);
      color: rgba(255,210,210,.95);
    }

    .msg{
      margin-top: 10px;
      font-size: 12px;
      color: rgba(255,255,255,.72);
    }
    .msg.ok{ color: var(--ok); }
    .msg.bad{ color: rgba(255,150,150,.95); }

    /* ======= Login content area ======= */
    .loginBody{
      margin-top: 14px;
      padding: 22px;
      border-radius: var(--radius2);
      background: rgba(255,255,255,.05);
      border: 1px solid rgba(255,255,255,.14);
      backdrop-filter: blur(14px);
      box-shadow: var(--shadow);
    }
    .loginBody h2{
      margin: 0 0 8px;
      font-size: 20px;
      font-weight: 900;
      letter-spacing: .2px;
    }
    .loginBody p{
      margin: 0 0 14px;
      color: var(--muted);
      font-size: 13px;
      line-height: 1.6;
      max-width: 72ch;
    }

    .hintRow{
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items:center;
      justify-content:space-between;
      margin-top: 10px;
    }
    .pill{
      display:inline-flex;
      align-items:center;
      gap: 8px;
      padding: 9px 12px;
      border-radius: 999px;
      background: rgba(2,74,127,.22);
      border: 1px solid rgba(255,255,255,.14);
      color: rgba(255,255,255,.74);
      font-size: 12px;
      user-select:none;
      backdrop-filter: blur(14px);
    }

    /* ======= App Topbar ======= */
    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 14px;
      padding: 14px 16px;
      border-radius: var(--radius2);
      background: rgba(2,74,127,.18);
      border: 1px solid rgba(255,255,255,.14);
      backdrop-filter: blur(14px);
      box-shadow: var(--shadow);
      margin-bottom: 16px;
    }

    .actions{
      display:flex;
      align-items:center;
      gap: 10px;
      flex-wrap: wrap;
      justify-content:flex-end;
    }

    /* ======= Cards / activities ======= */
    .panel{
      padding: 18px;
      border-radius: var(--radius2);
      background: rgba(255,255,255,.05);
      border: 1px solid rgba(255,255,255,.14);
      backdrop-filter: blur(14px);
      box-shadow: var(--shadow);
    }
    .panel h2{
      margin: 0 0 6px;
      font-size: 15px;
      letter-spacing: .2px;
      font-weight: 900;
    }
    .panel .sub{
      margin: 0 0 16px;
      font-size: 12px;
      color: var(--muted);
      line-height: 1.5;
    }

    .cards{
      display:grid;
      grid-template-columns: repeat(12, 1fr);
      gap: 12px;
    }

    .card{
      grid-column: span 12;
      padding: 16px;
      border-radius: var(--radius2);
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04));
      border: 1px solid rgba(255,255,255,.14);
      backdrop-filter: blur(14px);
      position: relative;
      overflow:hidden;
      transform: translateY(0);
      transition: transform .16s ease, border-color .16s ease, box-shadow .16s ease, background .16s ease;
    }

    /* Glow azul no hover */
    .card::before{
      content:"";
      position:absolute;
      inset:-60%;
      background: radial-gradient(circle at 30% 20%, rgba(10,111,184,.35), transparent 55%);
      opacity: .0;
      transition: opacity .16s ease;
      transform: rotate(12deg);
      pointer-events:none;
    }

    .card:hover{
      transform: translateY(-4px);
      border-color: rgba(10,111,184,.55);
      background: linear-gradient(180deg, rgba(10,111,184,.12), rgba(255,255,255,.04));
      box-shadow: 0 18px 60px rgba(2,74,127,.40);
    }
    .card:hover::before{ opacity: 1; }

    .cardHeader{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 10px;
    }

    .title{
      display:flex;
      flex-direction:column;
      gap: 6px;
      min-width: 0;
    }
    .title strong{
      font-size: 14px;
      font-weight: 900;
      letter-spacing:.2px;
      white-space: nowrap;
      overflow:hidden;
      text-overflow: ellipsis;
    }
    .title span{
      font-size: 12px;
      color: rgba(255,255,255,.72);
      white-space: nowrap;
      overflow:hidden;
      text-overflow: ellipsis;
    }

    .tags{
      display:flex;
      gap: 6px;
      flex-wrap: wrap;
      justify-content:flex-end;
      flex-shrink:0;
    }
    .tag{
      font-size: 11px;
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(2,74,127,.22);
      border: 1px solid rgba(255,255,255,.12);
      color: rgba(255,255,255,.76);
    }

    .cardFooter{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      margin-top: 14px;
    }

    .small{
      font-size: 11px;
      color: rgba(255,255,255,.65);
    }

    .iconBtn{
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.08);
      color: var(--text);
      padding: 8px 10px;
      border-radius: 14px;
      cursor:pointer;
      transition: transform .12s ease, background .12s ease, border-color .12s ease;
      font-weight: 900;
      font-size: 12px;
    }
    .iconBtn:hover{
      transform: translateY(-1px);
      background: rgba(255,255,255,.11);
      border-color: rgba(10,111,184,.55);
    }

    .hidden{ display:none !important; }

    @media (min-width: 720px){
      .card{ grid-column: span 6; }
      .panel{ padding: 22px; }
    }
    @media (min-width: 1000px){
      .card{ grid-column: span 4; }
    }

    /* Modal */
    .backdrop{
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,.60);
      display:none;
      align-items:center;
      justify-content:center;
      padding: 18px;
      z-index: 50;
    }
    .modal{
      width: min(560px, 100%);
      border-radius: var(--radius2);
      background: rgba(6,10,16,.92);
      border: 1px solid rgba(255,255,255,.16);
      backdrop-filter: blur(18px);
      box-shadow: var(--shadow);
      padding: 18px;
    }
    .modal h3{ margin: 0 0 4px; font-size: 14px; font-weight: 950; }
    .modal p{ margin: 0 0 14px; font-size: 12px; color: var(--muted); line-height:1.5; }
    .modalActions{
      display:flex;
      gap: 10px;
      justify-content:flex-end;
      margin-top: 12px;
      flex-wrap: wrap;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="shell">

      <!-- LOGIN VIEW -->
      <section id="loginView">
        <div class="loginBar">
          <div class="brand">
            <div class="logo"></div>
            <div>
              <h1>Plataforma do Professor</h1>
              <p>Atividades em um s√≥ lugar</p>
            </div>
          </div>

          <div style="width: 100%;">
            <form class="loginForm" onsubmit="return false;">
              <div class="miniField">
                <label for="user">Login</label>
                <input id="user" autocomplete="username" placeholder="Digite seu login" />
              </div>

              <div class="miniField">
                <label for="pass">Senha</label>
                <input id="pass" type="password" autocomplete="current-password" placeholder="Digite sua senha" />
              </div>

              <button class="btn primary" id="loginBtn" type="button">Entrar</button>
              <button class="btn" id="demoBtn" type="button" title="Preenche com exemplo">Exemplo</button>
            </form>

            <div id="loginMsg" class="msg"></div>
          </div>
        </div>

        <div class="loginBody">
          <h2>Entre e escolha a atividade do dia.</h2>
          <p>
            Depois do login, voc√™ ter√° uma grade de atividades (blocos) para abrir seus outros sites.
            Voc√™ pode adicionar, editar e remover links diretamente na plataforma.
          </p>

          <div class="hintRow">
            <span class="pill">‚úÖ Design minimalista em tons de azul</span>
            <span class="pill">üíæ Salva no navegador (sem servidor)</span>
            <span class="pill">‚ú® Cards com hover interativo</span>
          </div>

          <div class="msg" style="margin-top:14px;">
            <span style="color:rgba(255,255,255,.55)">Config:</span>
            usu√°rio/senha podem ser alterados no c√≥digo em <b>AUTH</b>.
          </div>
        </div>
      </section>

      <!-- APP VIEW -->
      <section id="appView" class="hidden">
        <header class="topbar">
          <div class="brand">
            <div class="logo"></div>
            <div>
              <h1>Plataforma do Professor</h1>
              <p id="subtitle">Bem-vindo</p>
            </div>
          </div>

          <div class="actions">
            <div class="pill" id="countPill">0 atividades</div>
            <button class="btn" id="addBtn">+ Nova atividade</button>
            <button class="btn danger" id="logoutBtn">Sair</button>
          </div>
        </header>

        <section class="panel">
          <h2>Atividades</h2>
          <p class="sub">
            Passe o mouse para ver a intera√ß√£o e clique em <b>Abrir</b> para iniciar a atividade com a turma.
          </p>

          <div id="cards" class="cards"></div>

          <div id="emptyState" class="sub hidden" style="margin-top:8px;">
            Nenhuma atividade cadastrada. Clique em <b>‚ÄúNova atividade‚Äù</b> para adicionar.
          </div>
        </section>
      </section>

    </div>
  </div>

  <!-- MODAL -->
  <div id="backdrop" class="backdrop" role="dialog" aria-modal="true">
    <div class="modal">
      <h3 id="modalTitle">Nova atividade</h3>
      <p id="modalHint">Cadastre um nome e o link do seu outro site.</p>

      <div class="miniField" style="min-width:100%; margin-bottom:12px;">
        <label for="actName">Nome da atividade</label>
        <input id="actName" placeholder="Ex.: Jogo de Fra√ß√µes" />
      </div>

      <div class="miniField" style="min-width:100%; margin-bottom:12px;">
        <label for="actUrl">Link (URL)</label>
        <input id="actUrl" placeholder="https://seusite.com/atividade" />
      </div>

      <div class="miniField" style="min-width:100%;">
        <label for="actTag">Tag (opcional)</label>
        <input id="actTag" placeholder="Ex.: Matem√°tica ‚Ä¢ 6¬∫ ano" />
      </div>

      <div class="modalActions">
        <button class="btn" id="cancelBtn">Cancelar</button>
        <button class="btn primary" id="saveBtn">Salvar</button>
      </div>

      <div id="modalMsg" class="msg"></div>
    </div>
  </div>

  <script>
    /***********************
     * CONFIG (mude aqui)
     ***********************/
    const AUTH = {
      username: "professor",
      password: "1234"
    };

    const STORAGE_KEYS = {
      session: "platform_session_v2",
      activities: "platform_activities_v2"
    };

    const $ = (id) => document.getElementById(id);

    function nowGreeting() {
      const h = new Date().getHours();
      if (h < 12) return "Bom dia";
      if (h < 18) return "Boa tarde";
      return "Boa noite";
    }

    function isValidUrl(url) {
      try {
        const u = new URL(url);
        return ["http:", "https:"].includes(u.protocol);
      } catch {
        return false;
      }
    }

    function loadActivities() {
      const raw = localStorage.getItem(STORAGE_KEYS.activities);
      if (!raw) return seedActivities();
      try {
        const arr = JSON.parse(raw);
        if (Array.isArray(arr)) return arr;
        return seedActivities();
      } catch {
        return seedActivities();
      }
    }

    function saveActivities(arr) {
      localStorage.setItem(STORAGE_KEYS.activities, JSON.stringify(arr));
    }

    function seedActivities() {
      const starter = [
        { id: crypto.randomUUID(), name: "Atividade 1 (exemplo)", url: "https://example.com", tag: "Exemplo" },
        { id: crypto.randomUUID(), name: "Atividade 2 (exemplo)", url: "https://example.com", tag: "Interativa" }
      ];
      saveActivities(starter);
      return starter;
    }

    function setSession(isOn, username="") {
      localStorage.setItem(STORAGE_KEYS.session, JSON.stringify({ isOn, username }));
    }

    function getSession() {
      const raw = localStorage.getItem(STORAGE_KEYS.session);
      if (!raw) return { isOn: false, username: "" };
      try { return JSON.parse(raw) ?? { isOn: false, username: "" }; }
      catch { return { isOn: false, username: "" }; }
    }

    let activities = [];
    let editingId = null;

    function showLogin() {
      $("loginView").classList.remove("hidden");
      $("appView").classList.add("hidden");
      $("loginMsg").textContent = "";
      $("user").value = "";
      $("pass").value = "";
      editingId = null;
    }

    function showApp(username) {
      $("loginView").classList.add("hidden");
      $("appView").classList.remove("hidden");
      $("subtitle").textContent = `${nowGreeting()}, ${username}.`;
      activities = loadActivities();
      render();
    }

    function escapeHtml(str) {
      return String(str).replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }

    function render() {
      const cards = $("cards");
      cards.innerHTML = "";

      $("countPill").textContent = `${activities.length} atividade${activities.length === 1 ? "" : "s"}`;
      $("emptyState").classList.toggle("hidden", activities.length !== 0);

      for (const a of activities) {
        const host = (() => { try { return new URL(a.url).host; } catch { return a.url; } })();

        const card = document.createElement("div");
        card.className = "card";
        card.innerHTML = `
          <div class="cardHeader">
            <div class="title">
              <strong title="${escapeHtml(a.name)}">${escapeHtml(a.name)}</strong>
              <span title="${escapeHtml(a.url)}">${escapeHtml(host)}</span>
            </div>
            <div class="tags">
              <span class="tag">${escapeHtml(a.tag || "Sem tag")}</span>
            </div>
          </div>

          <div class="cardFooter">
            <span class="small">Passe o mouse ‚Ä¢ Clique para abrir</span>
            <div style="display:flex; gap:8px; align-items:center;">
              <button class="iconBtn" data-action="open" data-id="${a.id}">Abrir</button>
              <button class="iconBtn" data-action="edit" data-id="${a.id}">Editar</button>
              <button class="iconBtn" data-action="del" data-id="${a.id}"
                style="border-color: rgba(255,90,90,.35); background: rgba(255,90,90,.10);">Excluir</button>
            </div>
          </div>
        `;
        cards.appendChild(card);
      }
    }

    function openModal(mode, activity=null) {
      $("backdrop").style.display = "flex";
      $("modalMsg").textContent = "";
      $("modalMsg").className = "msg";

      if (mode === "create") {
        editingId = null;
        $("modalTitle").textContent = "Nova atividade";
        $("modalHint").textContent = "Cadastre um nome e o link do seu outro site.";
        $("actName").value = "";
        $("actUrl").value = "";
        $("actTag").value = "";
      } else {
        editingId = activity.id;
        $("modalTitle").textContent = "Editar atividade";
        $("modalHint").textContent = "Atualize o nome, link e/ou tag.";
        $("actName").value = activity.name ?? "";
        $("actUrl").value = activity.url ?? "";
        $("actTag").value = activity.tag ?? "";
      }

      setTimeout(() => $("actName").focus(), 40);
    }

    function closeModal() {
      $("backdrop").style.display = "none";
      editingId = null;
    }

    function showModalMsg(text, ok=false) {
      $("modalMsg").textContent = text;
      $("modalMsg").className = "msg " + (ok ? "ok" : "bad");
    }

    function doLogin() {
      const u = $("user").value.trim();
      const p = $("pass").value;

      if (!u || !p) {
        $("loginMsg").textContent = "Preencha login e senha.";
        $("loginMsg").className = "msg bad";
        return;
      }

      if (u === AUTH.username && p === AUTH.password) {
        setSession(true, u);
        showApp(u);
      } else {
        $("loginMsg").textContent = "Login ou senha inv√°lidos.";
        $("loginMsg").className = "msg bad";
      }
    }

    function doLogout() {
      setSession(false, "");
      showLogin();
    }

    function handleCardAction(e) {
      const btn = e.target.closest("button[data-action]");
      if (!btn) return;

      const action = btn.dataset.action;
      const id = btn.dataset.id;

      const item = activities.find(x => x.id === id);
      if (!item) return;

      if (action === "open") {
        window.open(item.url, "_blank", "noopener,noreferrer");
        return;
      }
      if (action === "edit") {
        openModal("edit", item);
        return;
      }
      if (action === "del") {
        const ok = confirm(`Excluir "${item.name}"?`);
        if (!ok) return;
        activities = activities.filter(x => x.id !== id);
        saveActivities(activities);
        render();
      }
    }

    function saveFromModal() {
      const name = $("actName").value.trim();
      const url = $("actUrl").value.trim();
      const tag = $("actTag").value.trim();

      if (!name) return showModalMsg("Digite o nome da atividade.");
      if (!url) return showModalMsg("Digite o link (URL).");
      if (!isValidUrl(url)) return showModalMsg("URL inv√°lida. Use algo como https://...");

      if (editingId) {
        activities = activities.map(a => a.id === editingId ? { ...a, name, url, tag } : a);
        saveActivities(activities);
        render();
        showModalMsg("Altera√ß√µes salvas.", true);
        setTimeout(closeModal, 420);
      } else {
        activities.unshift({ id: crypto.randomUUID(), name, url, tag });
        saveActivities(activities);
        render();
        showModalMsg("Atividade adicionada.", true);
        setTimeout(closeModal, 420);
      }
    }

    function init() {
      $("loginBtn").addEventListener("click", doLogin);
      $("demoBtn").addEventListener("click", () => {
        $("user").value = AUTH.username;
        $("pass").value = AUTH.password;
        $("loginMsg").textContent = "Exemplo preenchido ‚Äî clique em Entrar.";
        $("loginMsg").className = "msg ok";
      });

      $("logoutBtn").addEventListener("click", doLogout);
      $("addBtn").addEventListener("click", () => openModal("create"));

      $("cancelBtn").addEventListener("click", closeModal);
      $("saveBtn").addEventListener("click", saveFromModal);

      $("backdrop").addEventListener("click", (e) => {
        if (e.target === $("backdrop")) closeModal();
      });

      document.addEventListener("keydown", (e) => {
        const modalOpen = $("backdrop").style.display === "flex";
        const loginVisible = !$("loginView").classList.contains("hidden");

        if (e.key === "Enter") {
          if (loginVisible) doLogin();
          if (modalOpen) saveFromModal();
        }
        if (e.key === "Escape" && modalOpen) closeModal();
      });

      $("cards").addEventListener("click", handleCardAction);

      const s = getSession();
      if (s.isOn && s.username) showApp(s.username);
      else showLogin();
    }

    init();
  </script>
</body>
</html>
